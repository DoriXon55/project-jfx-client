/*C3*/SET SCHEMA PUBLIC
CREATE TABLE IF NOT EXISTS projekt(\u000a projekt_id SERIAL, --SERIAL lub INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)\u000a nazwa VARCHAR(50) NOT NULL,\u000a opis VARCHAR(1000),\u000a dataczas_utworzenia TIMESTAMP DEFAULT now(),\u000a data_oddania DATE,\u000a CONSTRAINT projekt_pk PRIMARY KEY (projekt_id)\u000a)
CREATE TABLE IF NOT EXISTS zadanie (\u000a      zadanie_id INTEGER IDENTITY NOT NULL,\u000a      nazwa VARCHAR(50) NOT NULL,\u000a      opis CLOB,\u000a      kolejnosc INTEGER NOT NULL,\u000a      dataczas_utworzenia TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,\u000a      status VARCHAR(20),\u000a      data_rozpoczecia DATE,\u000a      data_zakonczenia DATE,\u000a      projekt_id INTEGER NOT NULL,\u000a      CONSTRAINT zadanie_pk PRIMARY KEY (zadanie_id)\u000a        )
CREATE INDEX IF NOT EXISTS projekt_nazwa_idx ON projekt(nazwa)
CREATE INDEX IF NOT EXISTS zadanie_nazwa_idx ON zadanie(nazwa)
ALTER TABLE zadanie ADD CONSTRAINT IF NOT EXISTS zadanie_projekt_fk FOREIGN KEY (projekt_id) REFERENCES projekt (projekt_id) ON DELETE CASCADE
ALTER TABLE zadanie ADD CONSTRAINT IF NOT EXISTS unique_kolejnosc UNIQUE (kolejnosc, projekt_id)
DELETE FROM ZADANIE WHERE ZADANIE_ID=1
INSERT INTO ZADANIE VALUES(1,'test','test',1,'2025-03-15 21:56:09.283755',15)
COMMIT
INSERT INTO ZADANIE VALUES(3,'ASFDASF','ASDFA',3,'2025-03-15 22:10:13.608028',15)
COMMIT
